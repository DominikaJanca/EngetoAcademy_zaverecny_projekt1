# EngetoAcademy_zaverecny_projekt
Projekt práce s databázemi SQL Engeto Academy
Jméno: Dominika Jančová 

**Průvodní listina**
Pro zodpovězení otázek jsem připravila datové podklady, společně s odpověďmi na zadané otázky. 
- Prvním krokem byla pečlivá analýza datových sad, které byly použity pro splnění zadání. Po prozkoumání jsem určila, že největším problémem pro práci s daty bude srovnání jednotlivých měřících parametrů, jelikož každá datová sada obsahuje data sesbírané v jiném časovém období, popřípadě v jiné periodicitě. V rocích, kvartálech a týdnech. Pro analýzu jsem určila, že datové operace provedu v datumové periodicitě kvartálu, každého roku. Jako časové období bylo určeno tedy období od roku 2006 po rok 2016, a to buďto ve všech 4 kvartálech, nebo v prvním kvartálu, resp. týdnu, který spadá pod první kvartál roku.
- Druhým poznatkem byla určitá filtrace dat. Původní datové sady obsahují i informace, které nejsou pro následnou analýzu potřebná. 
- Třetím poznatkem byla zjištěna nesrovnalost v datech v tabulce czechia_payroll, kde po propojení s informacemi z tabulky czechia_payroll_unit bylo zjištěno. Že kód pro Kč se objevuje u počtu zaměstnanců, kdežto kód pro počet zaměstnanců se zobrazuje u hodnoty mezd v korunách. Nicméně pro následnou analýzu nemá tato záměna vliv. 
- Pro tvorbu podkladové tabulky t_Dominika_Jancova_project_SQL_primary_final bylo třeba zkombinovat data z tabulek: czechia_payroll, kde došlo k filtraci dat pouze na data o hrubé mzdě (value_type_code = 2958) a pouze na data, která nebyla přepočítána (calculation_code = 100). Informace byly získány z doplňkových tabulek: czechia_payroll_calculation, czechia_payroll_industry_branch, czechia_payroll_unit, czechia_payroll_value_type. K tabulce byly připojeny jména označující kód, pro snadnější orientaci.
Otázky:
- 1/ **Rostou v průběhu let mzdy ve všech odvětvích, nebo v některých klesají?**
Využita byla tabulka t_Dominika_Jancova_project_SQL_primary_final, kde byly vyfiltrovány jen relevantní sloupce pro otázku a následně jsem vytvořila sloupce pro rok a následný rok s hodnotami mzdy. Následně jsem využila možnost funkce JOIN, abych spojila tabulku t_Dominika_Jancova_project_SQL_primary_final s její kopií, která je ale posunuta o jednu hodnotu. Pro vypočtení hodnoty mezi roky jsem využila CASE expresion, abych označila řádky, kde došlo k pokledu tržby mezi roky. Výsledky jsem shrnula v rámci pohledu v_Dominika_Jancova_project_SQL_primary_final_question_1.
*ZJIŠTĚNÍ*: Bylo zjištěno, že meziročně v jednotlivých kvartálech NENÍ odvětví, kde by nedošlo k poklesu mezd (V celém souboru dat). Nicméně v daném zvoleném období 2006-2016 nedošlo k poklesu mezd ve Zpracovatelském průmyslu (kód C). Nejvíce krát došlo k poklesu mzdy v porovnání kvartálu v těžebním a dobývacím průmyslu. Mzdy klesly ve v meziročním srovnání 2008-2009. Soustavně pak klesají od roku 2012. 
- 2/**Kolik je možné si koupit litrů mléka a kilogramů chleba za první a poslední srovnatelné období v dostupných datech cen a mezd?**
Využila jsem tabulku t_Dominika_Jancova_project_SQL_primary_final a vytvořila jsem tabulku t_Dominika_Jancova_project_SQL_primary_final2 pro kterou jsem využila sadu czechia_price a použila CASE experession pro vytvoření sloupce kvartálů ze sloupce date_from. Zároveň jsem si všimla, že data czechia_price jsou rozdělena ještě navíc pomocí regionů v česku. Spojila jsem tyto dvě tabulky do tabulky t_Dominika_Jancova_project_SQL_primary_final1 a omezila analýzu pouze na dané časové rozmezí (2006-2016). Pro analýzu jsem vyfiltrovala pouze region_code = NULL, abych dostala data z celé České republiky, pouze mléko a chléb (kódy 111301,114201). Výpočet kolik chleba nebo mléka jsem vypočetla matematickou operací. Zároveň jsem zaokrouhlila výsledné číslo na celé číslo a pouze na nižší hodnotu, protože s koupí poloviny chleba analýza nepočítá a zároveň nelze koupit "na dluh" zaokrouhleně více, než kolik byla původní hodnota. Výsledky jsem shrnula v pohledu v_Dominika_Jancova_project_SQL_primary_final_question2, který jsem následně ještě vyfiltrovala na rok 2006 a 2016, chléb a následně mléko a seřadila tabulku podle množství možné koupě. 
*ZJIŠTĚNÍ*: V roce 2006 v prvním kvartálu bylo možné koupit si více chleba a mléka, než v roce 2016 v prvním kvartálu. Největší množství chleba si v prvním kvartálu v roce 2006 mohlo koupit odvětví K (Peněžnictví a pojišťovnictví) = 2943 kg chleba nebo 3055 litrů mléka, kdežto v roce 2016 to bylo odvětví J (Informační a komunikační činnosti) = 2358 kg chleba nebo 2885 litrů mléka.
 - 3/**Která kategorie potravin zdražuje nejpomaleji (je u ní nejnižší percentuální meziroční nárůst)?**
Využila jsem tabulku t_Dominika_Jancova_project_SQL_primary_final2 ke které jsem přidala sloupce year_period, week_period, vyfiltrované ze sloupce date_from. Využila jsem funkci EXTRACT, jelikož date-from je sloupec ve správném datovém formátu, který tyto funkce podporuje. Opravila jsem chybu ve jmna sloupce pomocí ALTER TABLE a RENAME. Pomocí funkce WITH vytvořila dočasnou tabulku se všemi sloupci, a k tomu jsem přidala pomocí funkce LEAD sloupce s hodnotami pro další roky, abych vytvořila v řádcích možnost vypočítat procentuální meziroční nárust. K tomu jsem použila funkci ROUND pro zaokrouhlení a následně matematický výpočet. Vyfiltrovala jsem z tabulky pouze data pro celou Českou republiku (Region code = NULL) a vyhnula se duplicitě řádků, když jsem vyfiltrovala pouze řádky, kde sloupec se srovnáním 2015_2016 není NULL. Následně jsem meziroční růst pomocí funkce ROUND a matematického výpočtu průměru vypočetla průměrný meziroční růst u jednotlivých kategorií potravin od roku 2006 do roku 2016. 
*ZJIŠTĚNÍ*: Nejmenší průměrný nárust cen byl zaznamenán u cukru a poté jablek. 
- 4/**Existuje rok, ve kterém byl meziroční nárůst cen potravin výrazně vyšší než růst mezd (větší než 10 %)?**
Využila jsem z předchozí otázky v_Dominika_Jancova_project_SQL_primary_final_question3 a tabulku t_Dominika_Jancova_project_SQL_primary_final. Následně jsem z tabulky t_Dominika_Jancova_project_SQL_primary_final vytvořila view v_Dominika_Jancova_project_SQL_primary_final_question4, kde jsem vytvořila dočasnou tabulku pomocí funkce WITH a přidala sloupce s dalšími hodnotami, abych z nich následně mohla vypočítat procentuální nárust mezd v jednotlivých odvětvích. Omezila jsem tabulku pomocí WHERE roky 2006-2016. Duplicitě jsem se vyhnula pomocí WHERE, kde jsem filtrovala pouze sloupce value_2016 není prázdný. Následne jsem vyfiltrovala dočasnou tabulkou z pohledu v_Dominika_Jancova_project_SQL_primary_final_question3 pouze první kvartál (pomocí CASE EXPRESSION jsem vytvořila sloupec, kde týdny, které spadají do prvního kvartálu roku mají hodnotu 1 a následně jsem pouze tuto "TRUE" hodnotu vyfiltrovala, abych srovnala datumové hodnoty a pomocí LEFT JOIN jsem přidala view v_Dominika_Jancova_project_SQL_primary_final_question4. Pomocí matematické operace jsem vypočetla rozdíl meziročního procentuálního růstu v prvním kvartálu a pomocí CASE EXPRESSION jsem vytvořila sloupe, kde rozdíl mezi meziročními procentuálními srovnáními bylo víc než hodnota 10%. 
*ZJIŠTĚNÍ*: Neexistuje rok, kde by některá kategorie potravin v komparaci s jednotlivými průmyslovými odvětvími, nepřesáhla rozdíl nárustu 10% oproti růstu mzdy. Zároveň ale došlo také k propadu (zlevnění) cen některé kategorie potravin v komparaci s jednotlivými průmyslovými odvětvými. Analýza proběhla pro roky 2006-2016.
- 5/**Má výška HDP vliv na změny ve mzdách a cenách potravin?**
Využila jsem tabulku economies a pohledy v_Dominika_Jancova_project_SQL_primary_final_question4 a v_Dominika_Jancova_project_SQL_primary_final_question3 z předchoích otázek. Vytvořila jsem dočasnou tabulku, kde jsem z tabulky economies vyfiltrovala data pro českou republiku a vytvořila nové sloupce pomocí funkce LEAD, abych data srovnala do řádku podle roků od roku 2006 po rok 2016. Díky dočasné tabulky pomocí funkce WITH jsem následně matematicky vypočetla procentuální meziroční růst a zaokrouhlila na dvě desetinná místa pomocí funkce ROUND. Tento výsledek jsem shrnula v pohledu v_Dominika_Jancova_project_SQL_primary_final_question5. Ve dvou dočasných tabulkách jsem následně srovnala meziroční nárust HDP v ČR, růst mezd nebo růst cen potravin. 
*ZJIŠTĚNÍ*: Pro prostudování dat jsem došla k zjištění, že neexistuje jasná a stálá souvislost mezi růstem mezd a růstem HDP. 
-  Během ekonomické krize 2008-2009 nicméně došlo k propadu HDP i průměrné mzdy. V dalším roce nicméně došlo již k nárustu HDP, ale u některých odvětví průmyslu stále docházelo k poklesu průměrné mzdy. Jiným případem je meziroční srovnání HDP 2011-2012, kdy došlo k poklesu HDP, ale pokles mezd se projevil až v následujícím meziročním srovnání. HDP 2014-2015 meziročně procentuálně velmi vzorstlo, ale ve mzdách se takový nárust neprojevil.
-  Mezi meziroční procentuální změnou HDP a meziročním procentuálním růstem cen potravin neexistuje přímá souvislost. Některé kategorie potravin reflektují částečně růst HDP, nicméně jiné v ten samý moment naopak zlevňují. Nicméně lze pozorovat, že pokud HDP klesá několik let po sobě (2011 - 2013) lze pozorovat meziroční zlevnění většiny potravinových kategorií (2012-2015). 
